<!DOCTYPE html>
<html lang="zh-tw" data-theme="fantasy">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DataScout åœ–è¡¨æ¸¬è©¦</title>
  
  <!-- TailwindCSS & DaisyUI -->
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.10.3/dist/full.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- ApexCharts -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts@4.7.0/dist/apexcharts.min.js"></script>
  
  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/alpinejs@3.14.9/dist/cdn.min.js"></script>
  
  <script>
    tailwind.config = {
      daisyui: {
        themes: ["fantasy", "light", "dark"],
      },
    }
  </script>
</head>
<body class="bg-base-300">
  <!-- åœ–è¡¨æ¸¬è©¦é é¢ -->
  <div x-data="chartTesting" x-init="init()" class="min-h-screen">
    <!-- é ‚éƒ¨å°èˆª -->
    <div class="navbar bg-primary text-primary-content shadow-lg">
      <div class="navbar-start">
        <h1 class="text-xl font-bold">DataScout åœ–è¡¨æ¸¬è©¦</h1>
      </div>
      <div class="navbar-end">
        <div class="dropdown dropdown-end">
          <button class="btn btn-ghost btn-circle">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
          <ul class="menu dropdown-content bg-base-100 text-base-content rounded-box z-[1] w-52 p-2 shadow">
            <li><a @click="generateAllSampleData()">ç”Ÿæˆæ‰€æœ‰ç¤ºç¯„è³‡æ–™</a></li>
            <li><a @click="exportAllCharts()">åŒ¯å‡ºæ‰€æœ‰åœ–è¡¨</a></li>
            <li><a @click="clearAllCharts()">æ¸…é™¤æ‰€æœ‰åœ–è¡¨</a></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- éŒ¯èª¤è¨Šæ¯ -->
    <div x-show="error" x-transition class="alert alert-error m-4" x-cloak>
      <svg class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <span x-text="error"></span>
      <button @click="clearError()" class="btn btn-sm">âœ•</button>
    </div>

    <!-- è¼‰å…¥æŒ‡ç¤ºå™¨ -->
    <div x-show="isLoading" x-transition class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50">
      <div class="loading loading-spinner loading-lg text-primary"></div>
    </div>

    <!-- æ¨™ç±¤é å°èˆª -->
    <div class="tabs tabs-boxed m-4 bg-base-100">
      <button @click="switchTab('line')" 
              :class="{ 'tab-active': activeTab === 'line' }" 
              class="tab tab-lg">
        ğŸ“ˆ æŠ˜ç·šåœ–
      </button>
      <button @click="switchTab('area')" 
              :class="{ 'tab-active': activeTab === 'area' }" 
              class="tab tab-lg">
        ğŸ“Š å€åŸŸåœ–
      </button>
      <button @click="switchTab('bar')" 
              :class="{ 'tab-active': activeTab === 'bar' }" 
              class="tab tab-lg">
        ğŸ“Š é•·æ¢åœ–
      </button>
      <button @click="switchTab('scatter')" 
              :class="{ 'tab-active': activeTab === 'scatter' }" 
              class="tab tab-lg">
        ğŸ”¹ æ•£é»åœ–
      </button>
      <button @click="switchTab('radar')" 
              :class="{ 'tab-active': activeTab === 'radar' }" 
              class="tab tab-lg">
        ğŸ•¸ï¸ é›·é”åœ–
      </button>
      <button @click="switchTab('candlestick')" 
              :class="{ 'tab-active': activeTab === 'candlestick' }" 
              class="tab tab-lg">
        ğŸ•¯ï¸ è Ÿç‡­åœ–
      </button>
      <button @click="switchTab('pie')" 
              :class="{ 'tab-active': activeTab === 'pie' }" 
              class="tab tab-lg">
        ğŸ¥§ åœ“é¤…åœ–
      </button>
      <button @click="switchTab('heatmap')" 
              :class="{ 'tab-active': activeTab === 'heatmap' }" 
              class="tab tab-lg">
        ğŸ”¥ ç†±åŠ›åœ–
      </button>
      <button @click="switchTab('boxplot')" 
              :class="{ 'tab-active': activeTab === 'boxplot' }" 
              class="tab tab-lg">
        ğŸ“¦ ç®±å½¢åœ–
      </button>
    </div>

    <!-- åœ–è¡¨å…§å®¹å€ -->
    <div class="mx-4 space-y-4">
      
      <!-- æŠ˜ç·šåœ–æ¸¬è©¦ -->
      <div x-show="activeTab === 'line'" x-transition class="card bg-base-100 shadow-xl">
        <div class="card-header">
          <h2 class="card-title p-4">æŠ˜ç·šåœ–æ¸¬è©¦</h2>
          <div class="card-actions p-4">
            <button @click="updateChart('line', generateRandomLineData())" class="btn btn-primary btn-sm">
              æ›´æ–°è³‡æ–™
            </button>
            <button @click="exportChart('line', 'png')" class="btn btn-secondary btn-sm">
              åŒ¯å‡º PNG
            </button>
            <button @click="exportChart('line', 'svg')" class="btn btn-secondary btn-sm">
              åŒ¯å‡º SVG
            </button>
          </div>
        </div>
        <div class="card-body">
          <div id="test-line-chart" class="h-96"></div>
        </div>
      </div>

      <!-- å€åŸŸåœ–æ¸¬è©¦ -->
      <div x-show="activeTab === 'area'" x-transition class="card bg-base-100 shadow-xl">
        <div class="card-header">
          <h2 class="card-title p-4">å€åŸŸåœ–æ¸¬è©¦</h2>
          <div class="card-actions p-4">
            <button @click="updateChart('area', generateRandomAreaData())" class="btn btn-primary btn-sm">
              æ›´æ–°è³‡æ–™
            </button>
            <button @click="setAreaFillStyle('gradient')" class="btn btn-accent btn-sm">
              æ¼¸å±¤å¡«å……
            </button>
            <button @click="setAreaFillStyle('solid')" class="btn btn-accent btn-sm">
              å¯¦è‰²å¡«å……
            </button>
            <button @click="exportChart('area', 'png')" class="btn btn-secondary btn-sm">
              åŒ¯å‡º PNG
            </button>
          </div>
        </div>
        <div class="card-body">
          <div id="test-area-chart" class="h-96"></div>
        </div>
      </div>

      <!-- é•·æ¢åœ–æ¸¬è©¦ -->
      <div x-show="activeTab === 'bar'" x-transition class="card bg-base-100 shadow-xl">
        <div class="card-header">
          <h2 class="card-title p-4">é•·æ¢åœ–æ¸¬è©¦</h2>
          <div class="card-actions p-4">
            <button @click="updateChart('bar', generateRandomBarData())" class="btn btn-primary btn-sm">
              æ›´æ–°è³‡æ–™
            </button>
            <button @click="toggleBarOrientation()" class="btn btn-accent btn-sm">
              åˆ‡æ›æ–¹å‘
            </button>
            <button @click="exportChart('bar', 'png')" class="btn btn-secondary btn-sm">
              åŒ¯å‡º PNG
            </button>
          </div>
        </div>
        <div class="card-body">
          <div id="test-bar-chart" class="h-96"></div>
        </div>
      </div>

      <!-- è Ÿç‡­åœ–æ¸¬è©¦ -->
      <div x-show="activeTab === 'candlestick'" x-transition class="card bg-base-100 shadow-xl">
        <div class="card-header">
          <h2 class="card-title p-4">è Ÿç‡­åœ–æ¸¬è©¦</h2>
          <div class="card-actions p-4">
            <button @click="updateChart('candlestick', generateRandomCandlestickData())" class="btn btn-primary btn-sm">
              æ›´æ–°è³‡æ–™
            </button>
            <button @click="exportChart('candlestick', 'png')" class="btn btn-secondary btn-sm">
              åŒ¯å‡º PNG
            </button>
          </div>
        </div>
        <div class="card-body">
          <div id="test-candlestick-chart" class="h-96"></div>
        </div>
      </div>

      <!-- åœ“é¤…åœ–æ¸¬è©¦ -->
      <div x-show="activeTab === 'pie'" x-transition class="card bg-base-100 shadow-xl">
        <div class="card-header">
          <h2 class="card-title p-4">åœ“é¤…åœ–æ¸¬è©¦</h2>
          <div class="card-actions p-4">
            <button @click="updateChart('pie', generateRandomPieData())" class="btn btn-primary btn-sm">
              æ›´æ–°è³‡æ–™
            </button>
            <button @click="togglePieDonutMode()" class="btn btn-accent btn-sm">
              åˆ‡æ›ç’°å½¢æ¨¡å¼
            </button>
            <button @click="setPieLegendPosition('top')" class="btn btn-accent btn-sm">
              åœ–ä¾‹é ‚éƒ¨
            </button>
            <button @click="setPieLegendPosition('bottom')" class="btn btn-accent btn-sm">
              åœ–ä¾‹åº•éƒ¨
            </button>
            <button @click="exportChart('pie', 'png')" class="btn btn-secondary btn-sm">
              åŒ¯å‡º PNG
            </button>
          </div>
        </div>
        <div class="card-body">
          <div id="test-pie-chart" class="h-96"></div>
        </div>
      </div>

      <!-- æ•£é»åœ–æ¸¬è©¦ -->
      <div x-show="activeTab === 'scatter'" x-transition class="card bg-base-100 shadow-xl">
        <div class="card-header">
          <h2 class="card-title p-4">æ•£é»åœ–æ¸¬è©¦</h2>
          <div class="card-actions p-4">
            <button @click="updateChart('scatter', generateRandomScatterData())" class="btn btn-primary btn-sm">
              æ›´æ–°è³‡æ–™
            </button>
            <button @click="addScatterSeries()" class="btn btn-accent btn-sm">
              æ–°å¢ç³»åˆ—
            </button>
            <button @click="loadScatterExample('basic')" class="btn btn-accent btn-sm">
              åŸºç¤ç¯„ä¾‹
            </button>
            <button @click="loadScatterExample('correlation')" class="btn btn-accent btn-sm">
              ç›¸é—œæ€§ç¯„ä¾‹
            </button>
            <button @click="resetScatterZoom()" class="btn btn-info btn-sm">
              é‡ç½®ç¸®æ”¾
            </button>
            <button @click="exportChart('scatter', 'png')" class="btn btn-secondary btn-sm">
              åŒ¯å‡º PNG
            </button>
          </div>
        </div>
        <div class="card-body">
          <div id="test-scatter-chart" class="h-96"></div>
          <!-- ç³»åˆ—ç®¡ç† -->
          <div class="mt-4" x-data="{ showSeriesManager: false }">
            <button @click="showSeriesManager = !showSeriesManager" class="btn btn-sm btn-outline">
              <span x-text="showSeriesManager ? 'éš±è—' : 'é¡¯ç¤º'"></span>ç³»åˆ—ç®¡ç†
            </button>
            <div x-show="showSeriesManager" x-transition class="mt-2 p-4 bg-base-200 rounded">
              <h4 class="font-medium mb-2">ç›®å‰ç³»åˆ—:</h4>
              <template x-for="(series, index) in scatterSeriesList" :key="index">
                <div class="flex items-center justify-between py-1">
                  <span class="text-sm" x-text="series.name"></span>
                  <div class="space-x-2">
                    <button @click="toggleScatterSeries(series.name)" 
                            :class="series.visible ? 'btn-primary' : 'btn-outline'" 
                            class="btn btn-xs">
                      <span x-text="series.visible ? 'é¡¯ç¤º' : 'éš±è—'"></span>
                    </button>
                    <button @click="removeScatterSeries(series.name)" class="btn btn-xs btn-error">
                      ç§»é™¤
                    </button>
                  </div>
                </div>
              </template>
            </div>
          </div>
        </div>
      </div>

      <!-- é›·é”åœ–æ¸¬è©¦ -->
      <div x-show="activeTab === 'radar'" x-transition class="card bg-base-100 shadow-xl">
        <div class="card-header">
          <h2 class="card-title p-4">é›·é”åœ–æ¸¬è©¦</h2>
          <div class="card-actions p-4">
            <button @click="updateChart('radar', generateRandomRadarData())" class="btn btn-primary btn-sm">
              æ›´æ–°è³‡æ–™
            </button>
            <button @click="addRadarSeries()" class="btn btn-accent btn-sm">
              æ–°å¢ç³»åˆ—
            </button>
            <button @click="loadRadarExample('basic')" class="btn btn-accent btn-sm">
              åŸºç¤ç¯„ä¾‹
            </button>
            <button @click="loadRadarExample('comparison')" class="btn btn-accent btn-sm">
              æ¯”è¼ƒç¯„ä¾‹
            </button>
            <button @click="loadRadarExample('performance')" class="btn btn-accent btn-sm">
              ç¸¾æ•ˆç¯„ä¾‹
            </button>
            <button @click="exportChart('radar', 'png')" class="btn btn-secondary btn-sm">
              åŒ¯å‡º PNG
            </button>
          </div>
        </div>
        <div class="card-body">
          <div id="test-radar-chart" class="h-96"></div>
          <!-- é›·é”åœ–æ§åˆ¶é¢æ¿ -->
          <div class="mt-4" x-data="{ showControls: false }">
            <button @click="showControls = !showControls" class="btn btn-sm btn-outline">
              <span x-text="showControls ? 'éš±è—' : 'é¡¯ç¤º'"></span>æ§åˆ¶é¢æ¿
            </button>
            <div x-show="showControls" x-transition class="mt-2 p-4 bg-base-200 rounded space-y-4">
              <!-- Yè»¸ç¯„åœæ§åˆ¶ -->
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                  <label class="label">
                    <span class="label-text">Yè»¸æœ€å°å€¼</span>
                  </label>
                  <input type="range" min="0" max="50" x-model="radarYMin" class="range range-primary range-sm">
                  <span class="text-xs" x-text="radarYMin"></span>
                </div>
                <div>
                  <label class="label">
                    <span class="label-text">Yè»¸æœ€å¤§å€¼</span>
                  </label>
                  <input type="range" min="50" max="200" x-model="radarYMax" class="range range-primary range-sm">
                  <span class="text-xs" x-text="radarYMax"></span>
                </div>
                <div class="flex items-end">
                  <button @click="setRadarYAxisRange()" class="btn btn-sm btn-primary">
                    å¥—ç”¨ç¯„åœ
                  </button>
                </div>
              </div>
              
              <!-- é›·é”åœ–æ¨£å¼æ§åˆ¶ -->
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                  <label class="label">
                    <span class="label-text">é›·é”åœ–å¤§å°</span>
                  </label>
                  <input type="range" min="80" max="200" x-model="radarSize" 
                         @change="setRadarSize(radarSize)" class="range range-secondary range-sm">
                  <span class="text-xs" x-text="radarSize"></span>
                </div>
                <div>
                  <label class="label">
                    <span class="label-text">å¡«å……é€æ˜åº¦</span>
                  </label>
                  <input type="range" min="0" max="1" step="0.1" x-model="radarOpacity" 
                         @change="setRadarFillOpacity(radarOpacity)" class="range range-secondary range-sm">
                  <span class="text-xs" x-text="radarOpacity"></span>
                </div>
              </div>

              <!-- ç³»åˆ—ç®¡ç† -->
              <div>
                <h4 class="font-medium mb-2">ç›®å‰ç³»åˆ—:</h4>
                <template x-for="(series, index) in radarSeriesList" :key="index">
                  <div class="flex items-center justify-between py-1">
                    <span class="text-sm" x-text="series.name"></span>
                    <div class="space-x-2">
                      <button @click="toggleRadarSeries(series.name)" 
                              :class="series.visible ? 'btn-primary' : 'btn-outline'" 
                              class="btn btn-xs">
                        <span x-text="series.visible ? 'é¡¯ç¤º' : 'éš±è—'"></span>
                      </button>
                    </div>
                  </div>
                </template>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ç†±åŠ›åœ–æ¸¬è©¦ -->
      <div x-show="activeTab === 'heatmap'" x-transition class="card bg-base-100 shadow-xl">
        <div class="card-header">
          <h2 class="card-title p-4">ç†±åŠ›åœ–æ¸¬è©¦</h2>
          <div class="card-actions p-4">
            <button @click="updateChart('heatmap', generateRandomHeatmapData())" class="btn btn-primary btn-sm">
              æ›´æ–°è³‡æ–™
            </button>
            <button @click="loadHeatmapExample('basic')" class="btn btn-accent btn-sm">
              åŸºç¤ç¯„ä¾‹
            </button>
            <button @click="loadHeatmapExample('colorRange')" class="btn btn-accent btn-sm">
              è‰²å½©ç¯„åœ
            </button>
            <button @click="loadHeatmapExample('temperature')" class="btn btn-accent btn-sm">
              æº«åº¦åˆ†ä½ˆ
            </button>
            <button @click="exportChart('heatmap', 'png')" class="btn btn-secondary btn-sm">
              åŒ¯å‡º PNG
            </button>
            <button @click="exportChart('heatmap', 'svg')" class="btn btn-secondary btn-sm">
              åŒ¯å‡º SVG
            </button>
          </div>
        </div>
        <div class="card-body">
          <div id="test-heatmap-chart" class="h-96"></div>
        </div>
      </div>

      <!-- ç®±å½¢åœ–æ¸¬è©¦ -->
      <div x-show="activeTab === 'boxplot'" x-transition class="card bg-base-100 shadow-xl">
        <div class="card-header">
          <h2 class="card-title p-4">ç®±å½¢åœ–æ¸¬è©¦</h2>
          <div class="card-actions p-4">
            <button @click="updateChart('boxplot', generateRandomBoxplotData())" class="btn btn-primary btn-sm">
              æ›´æ–°è³‡æ–™
            </button>
            <button @click="loadBoxplotExample('basic')" class="btn btn-accent btn-sm">
              åŸºç¤ç¯„ä¾‹
            </button>
            <button @click="loadBoxplotExample('multiSeries')" class="btn btn-accent btn-sm">
              å¤šç³»åˆ—
            </button>
            <button @click="loadBoxplotExample('performance')" class="btn btn-accent btn-sm">
              æ€§èƒ½åˆ†æ
            </button>
            <button @click="exportChart('boxplot', 'png')" class="btn btn-secondary btn-sm">
              åŒ¯å‡º PNG
            </button>
            <button @click="exportChart('boxplot', 'svg')" class="btn btn-secondary btn-sm">
              åŒ¯å‡º SVG
            </button>
          </div>
        </div>
        <div class="card-body">
          <div id="test-boxplot-chart" class="h-96"></div>
        </div>
      </div>

    </div>

    <!-- åº•éƒ¨èªªæ˜ -->
    <div class="m-4 mt-8">
      <div class="alert alert-info">
        <svg class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <div>
          <h3 class="font-bold">åœ–è¡¨æ¸¬è©¦èªªæ˜</h3>
          <p class="text-sm">æ­¤é é¢ç”¨æ–¼æ¸¬è©¦æ–°çš„ Alpine.js åœ–è¡¨çµ„ä»¶ã€‚æ¯å€‹åœ–è¡¨éƒ½æ”¯æ´è³‡æ–™æ›´æ–°ã€æ¨£å¼èª¿æ•´å’ŒåŒ¯å‡ºåŠŸèƒ½ã€‚</p>
        </div>
      </div>
    </div>
  </div>

  <!-- è¼‰å…¥çµ„ä»¶ -->
  <script type="module">
    import { LineChart } from '/src/components/charts/LineChart.js';
    import { AreaChart } from '/src/components/charts/AreaChart.js';
    import { BarChart } from '/src/components/charts/BarChart.js';
    import { ScatterChart } from '/src/components/charts/ScatterChart.js';
    import { RadarChart } from '/src/components/charts/RadarChart.js';
    import { CandlestickChart } from '/src/components/charts/CandlestickChart.js';
    import { PieChart } from '/src/components/charts/PieChart.js';
    import { HeatMapChart } from '/src/components/charts/HeatMapChart.js';
    import { BoxPlotChart } from '/src/components/charts/BoxPlotChart.js';

    // åœ–è¡¨æ¸¬è©¦çµ„ä»¶
    document.addEventListener('alpine:init', () => {
      Alpine.data('chartTesting', () => ({
        activeTab: 'line',
        isLoading: false,
        error: null,
        
        // åœ–è¡¨å¯¦ä¾‹
        lineChart: null,
        areaChart: null,
        barChart: null,
        scatterChart: null,
        radarChart: null,
        candlestickChart: null,
        pieChart: null,
        heatmapChart: null,
        boxplotChart: null,
        
        // æ•£é»åœ–ç‰¹æœ‰ç‹€æ…‹
        scatterSeriesList: [],
        
        // é›·é”åœ–ç‰¹æœ‰ç‹€æ…‹
        radarSeriesList: [],
        radarYMin: 0,
        radarYMax: 100,
        radarSize: 140,
        radarOpacity: 0.1,

        init() {
          console.log('åœ–è¡¨æ¸¬è©¦é é¢åˆå§‹åŒ–');
          this.initCharts();
        },

        async initCharts() {
          try {
            this.isLoading = true;
            await this.initLineChart();
            await this.initAreaChart();
            await this.initBarChart();
            await this.initScatterChart();
            await this.initRadarChart();
            await this.initCandlestickChart();
            await this.initPieChart();
            await this.initHeatmapChart();
            await this.initBoxplotChart();
          } catch (error) {
            this.handleError(error, 'åœ–è¡¨åˆå§‹åŒ–');
          } finally {
            this.isLoading = false;
          }
        },

        async initLineChart() {
          const lineChart = new LineChart();
          const component = lineChart.init();
          component.chartId = 'test-line-chart';
          
          await component.loadChart(this.generateSampleLineData());
          this.lineChart = component;
        },

        async initAreaChart() {
          const areaChart = new AreaChart();
          const component = areaChart.init();
          component.chartId = 'test-area-chart';
          
          await component.loadChart(this.generateSampleAreaData());
          this.areaChart = component;
        },

        async initBarChart() {
          const barChart = new BarChart();
          const component = barChart.init();
          component.chartId = 'test-bar-chart';
          
          await component.loadChart(this.generateSampleBarData());
          this.barChart = component;
        },

        async initScatterChart() {
          const scatterChart = new ScatterChart();
          const component = scatterChart.init();
          component.chartId = 'test-scatter-chart';
          
          await component.loadChart(this.generateSampleScatterData());
          this.scatterChart = component;
          this.updateScatterSeriesList();
        },

        async initRadarChart() {
          const radarChart = new RadarChart();
          const component = radarChart.init();
          component.chartId = 'test-radar-chart';
          
          await component.loadChart(this.generateSampleRadarData());
          this.radarChart = component;
          this.updateRadarSeriesList();
        },

        async initCandlestickChart() {
          const candlestickChart = new CandlestickChart();
          const component = candlestickChart.init();
          component.chartId = 'test-candlestick-chart';
          
          await component.loadChart(this.generateSampleCandlestickData());
          this.candlestickChart = component;
        },

        async initPieChart() {
          const pieChart = new PieChart();
          const component = pieChart.init();
          component.chartId = 'test-pie-chart';
          
          await component.loadChart(this.generateSamplePieData());
          this.pieChart = component;
        },

        async initHeatmapChart() {
          const heatmapChart = new HeatMapChart();
          const component = heatmapChart.init();
          component.chartId = 'test-heatmap-chart';
          
          await component.loadChart(this.generateSampleHeatmapData());
          this.heatmapChart = component;
        },

        async initBoxplotChart() {
          const boxplotChart = new BoxPlotChart();
          const component = boxplotChart.init();
          component.chartId = 'test-boxplot-chart';
          
          await component.loadChart(this.generateSampleBoxplotData());
          this.boxplotChart = component;
        },

        switchTab(tab) {
          this.activeTab = tab;
          // å»¶é²èª¿æ•´åœ–è¡¨å¤§å°ä»¥ç¢ºä¿å®¹å™¨å¯è¦‹
          setTimeout(() => {
            this.resizeCurrentChart();
          }, 100);
        },

        resizeCurrentChart() {
          const chart = this[this.activeTab + 'Chart'];
          if (chart && chart.chart) {
            chart.chart.resize();
          }
        },

        async updateChart(chartType, newData) {
          const chart = this[chartType + 'Chart'];
          if (chart) {
            await chart.updateChart(newData);
          }
        },

        exportChart(chartType, format = 'png') {
          const chart = this[chartType + 'Chart'];
          if (chart && chart.chart) {
            if (format === 'svg') {
              chart.chart.dataURI().then(({ imgURI }) => {
                const link = document.createElement('a');
                link.href = imgURI;
                link.download = `${chartType}-chart.svg`;
                link.click();
              });
            } else {
              chart.chart.dataURI().then(({ imgURI }) => {
                const link = document.createElement('a');
                link.href = imgURI;
                link.download = `${chartType}-chart.png`;
                link.click();
              });
            }
          }
        },

        setAreaFillStyle(fillType) {
          if (this.areaChart) {
            this.areaChart.setFillStyle(fillType);
          }
        },

        toggleBarOrientation() {
          if (this.barChart) {
            // å¯¦ç¾æ–¹å‘åˆ‡æ›é‚è¼¯
            const isHorizontal = this.barChart.chart.opts.plotOptions?.bar?.horizontal;
            this.barChart.chart.updateOptions({
              plotOptions: {
                bar: {
                  horizontal: !isHorizontal
                }
              }
            });
          }
        },

        togglePieDonutMode() {
          if (this.pieChart) {
            this.pieChart.toggleDonutMode();
          }
        },

        setPieLegendPosition(position) {
          if (this.pieChart) {
            this.pieChart.setLegendPosition(position);
          }
        },

        // è³‡æ–™ç”Ÿæˆå‡½æ•¸
        generateSampleLineData() {
          return [
            { x: '2024-01-01', y: 30 },
            { x: '2024-01-02', y: 40 },
            { x: '2024-01-03', y: 35 },
            { x: '2024-01-04', y: 50 },
            { x: '2024-01-05', y: 49 }
          ];
        },

        generateSampleAreaData() {
          return [
            { x: '2024-01-01', y: 30 },
            { x: '2024-01-02', y: 40 },
            { x: '2024-01-03', y: 35 },
            { x: '2024-01-04', y: 50 },
            { x: '2024-01-05', y: 49 }
          ];
        },

        generateSampleBarData() {
          return [
            { category: 'ç”¢å“A', value: 100 },
            { category: 'ç”¢å“B', value: 80 },
            { category: 'ç”¢å“C', value: 120 },
            { category: 'ç”¢å“D', value: 90 }
          ];
        },

        generateSampleCandlestickData() {
          return [
            { x: new Date('2024-01-01'), y: [100, 110, 95, 105] },
            { x: new Date('2024-01-02'), y: [105, 120, 100, 115] },
            { x: new Date('2024-01-03'), y: [115, 125, 110, 120] }
          ];
        },

        generateSamplePieData() {
          return [
            { label: 'æ¡Œé¢é›»è…¦', value: 44 },
            { label: 'è¡Œå‹•è£ç½®', value: 55 },
            { label: 'å¹³æ¿é›»è…¦', value: 13 },
            { label: 'å…¶ä»–', value: 8 }
          ];
        },

        generateSampleScatterData() {
          return [
            { name: "æ¨£æœ¬ A", data: [[16.4, 5.4], [21.7, 2], [25.4, 3], [19, 2], [10.9, 1]] },
            { name: "æ¨£æœ¬ B", data: [[6.4, 13.4], [1.7, 11], [5.4, 8], [9, 17], [1.9, 4]] }
          ];
        },

        generateSampleRadarData() {
          return {
            series: [{
              name: 'æŠ€èƒ½è©•ä¼°',
              data: [80, 50, 30, 40, 100, 20]
            }],
            xaxis: {
              categories: ['æºé€š', 'æŠ€è¡“', 'å‰µæ„', 'é ˜å°', 'åˆ†æ', 'åŸ·è¡Œ']
            }
          };
        },

        generateRandomLineData() {
          const data = [];
          for (let i = 0; i < 10; i++) {
            data.push({
              x: `2024-01-${String(i + 1).padStart(2, '0')}`,
              y: Math.floor(Math.random() * 100) + 10
            });
          }
          return data;
        },

        generateRandomAreaData() {
          return this.generateRandomLineData(); // ç›¸åŒæ ¼å¼
        },

        generateRandomBarData() {
          const categories = ['A', 'B', 'C', 'D', 'E'];
          return categories.map(cat => ({
            category: `ç”¢å“${cat}`,
            value: Math.floor(Math.random() * 150) + 50
          }));
        },

        generateRandomCandlestickData() {
          const data = [];
          let lastClose = 100;
          
          for (let i = 0; i < 7; i++) {
            const open = lastClose + (Math.random() - 0.5) * 10;
            const close = open + (Math.random() - 0.5) * 20;
            const high = Math.max(open, close) + Math.random() * 10;
            const low = Math.min(open, close) - Math.random() * 10;
            
            const date = new Date('2024-01-01');
            date.setDate(date.getDate() + i);
            
            data.push({
              x: date,
              y: [open, high, low, close]
            });
            
            lastClose = close;
          }
          
          return data;
        },

        generateRandomPieData() {
          const categories = ['ç”¢å“A', 'ç”¢å“B', 'ç”¢å“C', 'ç”¢å“D', 'ç”¢å“E'];
          return categories.map(category => ({
            label: category,
            value: Math.floor(Math.random() * 100) + 20
          }));
        },

        generateRandomScatterData() {
          if (this.scatterChart && this.scatterChart.chartInstance) {
            return this.scatterChart.chartInstance.generateRandomData(
              Math.floor(Math.random() * 20) + 10,
              { xMin: 0, xMax: 100, yMin: 0, yMax: 100 }
            );
          }
          // å‚™ç”¨æ–¹æ³•
          const data = [];
          const count = Math.floor(Math.random() * 20) + 10;
          for (let i = 0; i < count; i++) {
            data.push([
              Math.floor(Math.random() * 100),
              Math.floor(Math.random() * 100)
            ]);
          }
          return [{ name: "éš¨æ©Ÿè³‡æ–™", data: data }];
        },

        generateRandomRadarData() {
          if (this.radarChart && this.radarChart.chartInstance) {
            return this.radarChart.chartInstance.generateRandomData(
              ['æŠ€èƒ½A', 'æŠ€èƒ½B', 'æŠ€èƒ½C', 'æŠ€èƒ½D', 'æŠ€èƒ½E'],
              1,
              { min: 0, max: 100 }
            );
          }
          // å‚™ç”¨æ–¹æ³•
          const categories = ['æŠ€èƒ½A', 'æŠ€èƒ½B', 'æŠ€èƒ½C', 'æŠ€èƒ½D', 'æŠ€èƒ½E'];
          const data = categories.map(() => Math.floor(Math.random() * 100));
          return {
            series: [{ name: "éš¨æ©Ÿè³‡æ–™", data: data }],
            xaxis: { categories: categories }
          };
        },

        generateSampleHeatmapData() {
          return {
            series: [{
              name: 'é€±ä¸€',
              data: [
                { x: '09:00', y: 20 },
                { x: '10:00', y: 35 },
                { x: '11:00', y: 45 },
                { x: '12:00', y: 80 },
                { x: '13:00', y: 55 },
                { x: '14:00', y: 30 },
                { x: '15:00', y: 25 },
                { x: '16:00', y: 40 },
                { x: '17:00', y: 60 }
              ]
            }, {
              name: 'é€±äºŒ',
              data: [
                { x: '09:00', y: 15 },
                { x: '10:00', y: 25 },
                { x: '11:00', y: 40 },
                { x: '12:00', y: 75 },
                { x: '13:00', y: 50 },
                { x: '14:00', y: 35 },
                { x: '15:00', y: 20 },
                { x: '16:00', y: 45 },
                { x: '17:00', y: 55 }
              ]
            }],
            options: {
              colorScale: {
                ranges: [
                  { from: 0, to: 20, color: '#00A100' },
                  { from: 21, to: 50, color: '#128FD9' },
                  { from: 51, to: 100, color: '#FFB200' }
                ]
              }
            }
          };
        },

        generateSampleBoxplotData() {
          return [
            {
              x: 'ç”¢å“A',
              y: [54, 66, 69, 75, 88]
            },
            {
              x: 'ç”¢å“B', 
              y: [43, 65, 69, 76, 81]
            },
            {
              x: 'ç”¢å“C',
              y: [31, 39, 45, 51, 59]
            },
            {
              x: 'ç”¢å“D',
              y: [39, 46, 55, 65, 71]
            },
            {
              x: 'ç”¢å“E',
              y: [29, 31, 35, 39, 44]
            }
          ];
        },

        generateRandomHeatmapData() {
          const hours = ['09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00'];
          const days = ['é€±ä¸€', 'é€±äºŒ', 'é€±ä¸‰', 'é€±å››', 'é€±äº”'];
          
          return {
            series: days.map(day => ({
              name: day,
              data: hours.map(hour => ({
                x: hour,
                y: Math.floor(Math.random() * 100) + 10
              }))
            }))
          };
        },

        generateRandomBoxplotData() {
          const products = ['ç”¢å“A', 'ç”¢å“B', 'ç”¢å“C', 'ç”¢å“D', 'ç”¢å“E'];
          return products.map(product => {
            const values = [];
            for (let i = 0; i < 20; i++) {
              values.push(Math.floor(Math.random() * 50) + 30);
            }
            values.sort((a, b) => a - b);
            
            const q1 = values[Math.floor(values.length * 0.25)];
            const median = values[Math.floor(values.length * 0.5)];
            const q3 = values[Math.floor(values.length * 0.75)];
            const min = values[0];
            const max = values[values.length - 1];
            
            return {
              x: product,
              y: [min, q1, median, q3, max]
            };
          });
        },

        // æ•£é»åœ–å°ˆç”¨æ–¹æ³•
        updateScatterSeriesList() {
          if (this.scatterChart && this.scatterChart.chartInstance && this.scatterChart.chartInstance.chart) {
            this.scatterSeriesList = this.scatterChart.chartInstance.chart.w.globals.seriesNames.map((name, index) => ({
              name: name,
              index: index,
              visible: true
            }));
          }
        },

        addScatterSeries() {
          if (this.scatterChart && this.scatterChart.chartInstance) {
            const randomData = this.scatterChart.chartInstance.generateRandomData(
              Math.floor(Math.random() * 15) + 5,
              { xMin: 0, xMax: 100, yMin: 0, yMax: 100 }
            );
            
            this.scatterChart.chartInstance.addSeries({
              name: `éš¨æ©Ÿç³»åˆ— ${Date.now().toString().slice(-4)}`,
              data: randomData
            });
            
            this.updateScatterSeriesList();
          }
        },

        removeScatterSeries(seriesName) {
          if (this.scatterChart && this.scatterChart.chartInstance) {
            this.scatterChart.chartInstance.removeSeries(seriesName);
            this.updateScatterSeriesList();
          }
        },

        toggleScatterSeries(seriesName) {
          if (this.scatterChart && this.scatterChart.chartInstance && this.scatterChart.chartInstance.chart) {
            this.scatterChart.chartInstance.chart.toggleSeries(seriesName);
            
            // æ›´æ–°åˆ—è¡¨ä¸­çš„å¯è¦‹ç‹€æ…‹
            const series = this.scatterSeriesList.find(s => s.name === seriesName);
            if (series) {
              series.visible = !series.visible;
            }
          }
        },

        loadScatterExample(type) {
          if (this.scatterChart && this.scatterChart.chartInstance) {
            this.isLoading = true;
            this.scatterChart.chartInstance.loadChart(
              this.scatterChart.chartInstance.getExampleData()[type]
            ).then(() => {
              this.updateScatterSeriesList();
            }).catch(error => {
              this.handleError(error, 'è¼‰å…¥æ•£é»åœ–ç¯„ä¾‹');
            }).finally(() => {
              this.isLoading = false;
            });
          }
        },

        resetScatterZoom() {
          if (this.scatterChart && this.scatterChart.chartInstance) {
            this.scatterChart.chartInstance.resetZoom();
          }
        },

        // é›·é”åœ–å°ˆç”¨æ–¹æ³•
        updateRadarSeriesList() {
          if (this.radarChart && this.radarChart.chartInstance && this.radarChart.chartInstance.chart) {
            this.radarSeriesList = this.radarChart.chartInstance.chart.w.globals.seriesNames.map((name, index) => ({
              name: name,
              index: index,
              visible: true
            }));
          }
        },

        addRadarSeries() {
          if (this.radarChart && this.radarChart.chartInstance) {
            const categories = this.radarChart.chartInstance.chart.w.globals.categoryLabels || 
                             ['æŠ€èƒ½A', 'æŠ€èƒ½B', 'æŠ€èƒ½C', 'æŠ€èƒ½D', 'æŠ€èƒ½E'];
            const randomData = categories.map(() => Math.floor(Math.random() * 100));
            
            this.radarChart.chartInstance.addSeries({
              name: `éš¨æ©Ÿç³»åˆ— ${Date.now().toString().slice(-4)}`,
              data: randomData
            });
            
            this.updateRadarSeriesList();
          }
        },

        toggleRadarSeries(seriesName) {
          if (this.radarChart && this.radarChart.chartInstance && this.radarChart.chartInstance.chart) {
            this.radarChart.chartInstance.chart.toggleSeries(seriesName);
            
            // æ›´æ–°åˆ—è¡¨ä¸­çš„å¯è¦‹ç‹€æ…‹
            const series = this.radarSeriesList.find(s => s.name === seriesName);
            if (series) {
              series.visible = !series.visible;
            }
          }
        },

        loadRadarExample(type) {
          if (this.radarChart && this.radarChart.chartInstance) {
            this.isLoading = true;
            this.radarChart.chartInstance.loadChart(
              this.radarChart.chartInstance.getExampleData()[type]
            ).then(() => {
              this.updateRadarSeriesList();
            }).catch(error => {
              this.handleError(error, 'è¼‰å…¥é›·é”åœ–ç¯„ä¾‹');
            }).finally(() => {
              this.isLoading = false;
            });
          }
        },

        setRadarYAxisRange() {
          if (this.radarChart && this.radarChart.chartInstance) {
            this.radarChart.chartInstance.setYAxisRange(this.radarYMin, this.radarYMax);
          }
        },

        setRadarSize(size) {
          if (this.radarChart && this.radarChart.chartInstance) {
            this.radarChart.chartInstance.setRadarSize(size);
          }
        },

        setRadarFillOpacity(opacity) {
          if (this.radarChart && this.radarChart.chartInstance) {
            this.radarChart.chartInstance.setFillOpacity(opacity);
          }
        },

        // ç†±åŠ›åœ–å°ˆç”¨æ–¹æ³•
        loadHeatmapExample(type) {
          if (this.heatmapChart && this.heatmapChart.chartInstance) {
            this.isLoading = true;
            this.heatmapChart.chartInstance.loadChart(
              this.heatmapChart.chartInstance.getExampleData()[type]
            ).then(() => {
              // æ›´æ–°å®Œæˆ
            }).catch(error => {
              this.handleError(error, 'è¼‰å…¥ç†±åŠ›åœ–ç¯„ä¾‹');
            }).finally(() => {
              this.isLoading = false;
            });
          }
        },

        // ç®±å½¢åœ–å°ˆç”¨æ–¹æ³•
        loadBoxplotExample(type) {
          if (this.boxplotChart && this.boxplotChart.chartInstance) {
            this.isLoading = true;
            this.boxplotChart.chartInstance.loadChart(
              this.boxplotChart.chartInstance.getExampleData()[type]
            ).then(() => {
              // æ›´æ–°å®Œæˆ
            }).catch(error => {
              this.handleError(error, 'è¼‰å…¥ç®±å½¢åœ–ç¯„ä¾‹');
            }).finally(() => {
              this.isLoading = false;
            });
          }
        },

        generateAllSampleData() {
          this.updateChart('line', this.generateRandomLineData());
          this.updateChart('area', this.generateRandomAreaData());
          this.updateChart('bar', this.generateRandomBarData());
          this.updateChart('scatter', this.generateRandomScatterData());
          this.updateChart('candlestick', this.generateRandomCandlestickData());
          this.updateChart('pie', this.generateRandomPieData());
          this.updateChart('heatmap', this.generateRandomHeatmapData());
          this.updateChart('boxplot', this.generateRandomBoxplotData());
        },

        exportAllCharts() {
          ['line', 'area', 'bar', 'scatter', 'candlestick', 'pie', 'heatmap', 'boxplot'].forEach(chartType => {
            this.exportChart(chartType, 'png');
          });
        },

        clearAllCharts() {
          // å¯¦ç¾æ¸…é™¤é‚è¼¯
          console.log('æ¸…é™¤æ‰€æœ‰åœ–è¡¨');
        },

        handleError(error, context = 'æ“ä½œ') {
          console.error(`åœ–è¡¨æ¸¬è©¦éŒ¯èª¤ (${context}):`, error);
          this.error = `${context}å¤±æ•—: ${error.message}`;
          setTimeout(() => {
            this.error = null;
          }, 5000);
        },

        clearError() {
          this.error = null;
        }
      }));
    });
  </script>
</body>
</html>
