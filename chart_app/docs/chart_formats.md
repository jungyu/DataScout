# Chart.js JSON 格式規範

本文件說明了 Chart.js 應用程式中使用的 JSON 資料格式標準。所有上傳或使用的 JSON 檔案應遵循此格式，以確保圖表能夠正確顯示。

## 基本結構

Chart.js JSON 資料必須包含以下基本結構：

```json
{
  "type": "圖表類型",
  "labels": ["標籤1", "標籤2", ...],
  "datasets": [
    {
      "label": "數據集名稱",
      "data": [值1, 值2, ...],
      "backgroundColor": "顏色",
      "borderColor": "邊框顏色",
      "borderWidth": 邊框寬度
    }
  ],
  "chartTitle": "圖表標題"
}
```

## 必要欄位說明

| 欄位 | 類型 | 說明 | 是否必須 |
|------|------|------|---------|
| `type` | 字串 | 圖表類型，如 `"line"`, `"bar"`, `"pie"` 等 | 選填，預設為 `"line"` |
| `labels` | 字串陣列 | X 軸的標籤（或分類名稱） | 必填 |
| `datasets` | 陣列 | 包含一個或多個資料集的陣列 | 必填 |
| `datasets[].label` | 字串 | 資料集的名稱（顯示在圖例中） | 必填 |
| `datasets[].data` | 數值陣列 | 資料點的值 | 必填 |
| `chartTitle` | 字串 | 圖表的標題 | 選填 |

## 樣式欄位說明

| 欄位 | 類型 | 說明 | 是否必須 |
|------|------|------|---------|
| `datasets[].backgroundColor` | 字串或陣列 | 資料點的背景顏色，可以是單一顏色或對應每個資料點的顏色陣列 | 選填 |
| `datasets[].borderColor` | 字串或陣列 | 資料點的邊框顏色 | 選填 |
| `datasets[].borderWidth` | 數值 | 邊框寬度 | 選填，預設為 1 |

## 圖表類型

支援以下圖表類型：

- `line`: 折線圖
- `bar`: 長條圖
- `pie`: 圓餅圖
- `doughnut`: 環形圖
- `radar`: 雷達圖
- `polarArea`: 極座標圖
- `bubble`: 氣泡圖
- `scatter`: 散點圖

## 特殊格式

### 散點圖與氣泡圖

散點圖和氣泡圖的資料格式與其他圖表不同，需要為每個點提供 X 和 Y 座標：

```json
{
  "type": "scatter",
  "datasets": [
    {
      "label": "散點數據",
      "data": [
        { "x": 10, "y": 20 },
        { "x": 15, "y": 30 },
        // 更多點...
      ]
    }
  ]
}
```

氣泡圖還需要提供 `r` 值來指定氣泡大小：

```json
{
  "type": "bubble",
  "datasets": [
    {
      "label": "氣泡數據",
      "data": [
        { "x": 10, "y": 20, "r": 5 },
        { "x": 15, "y": 30, "r": 8 },
        // 更多點...
      ]
    }
  ]
}
```

## 例子

### 折線圖範例

```json
{
  "type": "line",
  "labels": ["2025-01", "2025-02", "2025-03", "2025-04", "2025-05"],
  "datasets": [
    {
      "label": "銷售額",
      "data": [12800, 19500, 15200, 18100, 23000],
      "backgroundColor": "rgba(75, 192, 192, 0.6)",
      "borderColor": "rgba(75, 192, 192, 1.0)",
      "borderWidth": 2
    },
    {
      "label": "訂單量",
      "data": [125, 185, 143, 167, 210],
      "backgroundColor": "rgba(153, 102, 255, 0.6)",
      "borderColor": "rgba(153, 102, 255, 1.0)",
      "borderWidth": 2
    }
  ],
  "chartTitle": "2025年銷售表現"
}
```

### 圓餅圖範例

```json
{
  "type": "pie",
  "labels": ["臺北", "臺中", "高雄", "臺南", "新竹"],
  "datasets": [
    {
      "label": "銷售分布",
      "data": [35, 25, 20, 15, 5],
      "backgroundColor": [
        "rgba(255, 99, 132, 0.6)",
        "rgba(54, 162, 235, 0.6)",
        "rgba(255, 206, 86, 0.6)",
        "rgba(75, 192, 192, 0.6)",
        "rgba(153, 102, 255, 0.6)"
      ]
    }
  ],
  "chartTitle": "各地區銷售佔比"
}
```

## 注意事項

1. JSON 格式必須有效，所有字串需要用雙引號包圍，不支援單引號
2. 顏色值可以使用 CSS 顏色名稱、HEX 代碼、RGB 或 RGBA 格式
3. 當資料集中的資料點數量與標籤數量不符時，將以較短的一方為準
4. 上傳的 JSON 文件如不符合標準格式，系統會嘗試自動轉換，但可能導致顯示效果不佳
